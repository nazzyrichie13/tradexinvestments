<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>User Login - TradexInvest</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    /* (styles kept similar to your earlier design) */
body { font-family: Arial; display:flex; justify-content:center; align-items:center; height:100vh; background-color: rgba(0, 0, 255, 0.479); }
.login-box { padding:20px; border:1px solid #ccc; border-radius:8px; width:300px; }
input { width:100%; padding:8px; margin:5px 0; }
button { width:100%; padding:8px; margin-top:10px; cursor:pointer; }
.popup { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%);
        background:#fff; border:1px solid #ccc; padding:20px; z-index:1000; width:300px; border-radius:8px; }
.popup h3 { margin-top:0; }
  </style>
</head>
<body>
<h2>WELCOME TO TradeXInvest</h2>
  <div class="login-box">
<h2>Login</h2>
<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">
<button id="loginBtn">Login</button>
</div>
<div id="termsPopup" class="popup">
<h3>Terms & Conditions</h3>
p>Welcome to TradexInvest. By using our services, you agree to the following terms:</p>
    
    <h3>1. Security Features</h3>
    <ul>
      <li><strong>Two-Factor Authentication (2FA):</strong> We provide 2FA for additional security. It is strongly recommended to enable it for your account.</li>
      <li><strong>Cold Storage:</strong> The majority of user digital assets are stored in cold storage to protect against online threats.</li>
      <li><strong>Encryption:</strong> All sensitive user data is encrypted both in transit and at rest.</li>
    </ul>

    <h3>2. Fee Structure</h3>
    <ul>
      <li>Deposit Fee: <strong>0%</strong></li>
      <li>Withdrawal Fee: <strong>1.5%</strong> of the transaction amount</li>
      <li>Trading Fee: <strong>0.25%</strong> per executed trade</li>
      <li>Other network or blockchain fees may apply where relevant.</li>
    </ul>

    <h3>3. Risk Disclosure</h3>
    <p>Investing in digital assets involves high risk, including the potential loss of your entire investment. Prices are volatile and may be affected by external factors such as market trends, regulations, or technological changes. Past performance is not indicative of future results. You are solely responsible for your investment decisions.</p>

    <h3>4. User Agreement</h3>
    <p>By continuing, you acknowledge that you have read, understood, and agree to these Terms & Conditions. You also agree to our Privacy Policy and any updates that may occur.</p>

<p>Please accept our terms to continue.</p>
<button id="acceptTermsBtn">Accept</button>
</div>

  

 <div id="twoFAPopup" class="popup">
  <h3>2FA Verification</h3>
  <input type="text" id="twoFAInput" placeholder="Enter 2FA code">
  <button id="verify2FABtn">Verify</button>
  <button id="resend2FABtn">Resend Code</button>
  <p id="countdown"></p>
</div>

    



  

  <script>
const backendUrl = "https://tradexinvestments.onrender.com";

// Populate dashboard after login + 2FA
function showUserDashboard(user) {
  const dashboard = document.getElementById("dashboard");

  // Fill user info
  document.getElementById("userName").textContent = user.name;
  if (user.photo) document.getElementById("userPhoto").src = backendUrl + user.photo;

  // You can also populate investment/profit/interest dynamically if you fetch them
  document.getElementById("investment").textContent = user.investment || 0;
  document.getElementById("profit").textContent = user.profit || 0;
  document.getElementById("interest").textContent = user.totalInterest || 0;

  // Logout button
  document.getElementById("logoutBtn").onclick = () => {
    localStorage.removeItem("currentUser");
    localStorage.removeItem("twoFAVerified");
    localStorage.removeItem("termsAccepted");
    window.location.reload(); // go back to login
  };

  // Withdraw button
  document.getElementById("withdrawBtn").onclick = async () => {
    const amount = Number(document.getElementById("withdrawAmount").value);
    const method = document.getElementById("withdrawMethod").value;
    const msgEl = document.getElementById("withdrawMsg");

    if (!amount || amount <= 0) {
      msgEl.textContent = "Enter a valid amount";
      return;
    }

    if (method === "bank") {
      msgEl.textContent = "Bank-to-Bank withdrawals not allowed. Contact support.";
      return;
    }

    try {
      const token = localStorage.getItem("jwtToken");
      const res = await fetch(`${backendUrl}/api/withdraw`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${token}`
        },
        body: JSON.stringify({ amount, method })
      });
      const data = await res.json();
      if (!res.ok) throw new Error(data.msg || "Withdrawal failed");
      msgEl.style.color = "green";
      msgEl.textContent = "Withdrawal request submitted successfully!";
    } catch (err) {
      msgEl.style.color = "red";
      msgEl.textContent = err.message;
    }
  };
}

// On index.html load, render dashboard if logged in
document.addEventListener("DOMContentLoaded", () => {
  const user = JSON.parse(localStorage.getItem("currentUser"));
  const twoFAVerified = localStorage.getItem("twoFAVerified");

  if (user && twoFAVerified === "true") {
    showUserDashboard(user);
  }
});
</script>


  
</body>
</html>

   